<div class="ma-help-doc-container">
  <h1 ma-tr="ui.dox.freeMarker"></h1>
<p>

  Email templates are generated using FreeMarker <a href="https://freemarker.apache.org" target="_blank">FreeMarker</a>.  Mango can generate HTML or Plain text 
  emails, this is configured in the Email system settings area.
  
  Using the FreeMarker language one can customize the templates located at MA_HOME/ftl, if you choose to customize an existing template be sure 
  to place it into the overrides/ftl/... directory in the same folder structure as the original.
  
  Further to the standard FreeMarker language there are 2 additional directives specific to Mango.
  <ul>
    <li><code>&lt;@subject&gt;email subject content&lt;/@subject&gt;</code> - Defines the subject</li>
    <li><code>&lt;@fmt message=translatable message OR key=i18n key/&gt;</code> - allows the use of Mango's i18n translations</li>
  </ul>
  
  <h2>Model</h2>
  The model is a map of data sent into the template that allows accessing Mango specific information during template generation.  To use something from 
  the model, use ${modelKey} and/or ${modelKey.property}.  For example every Email generated by and event handler will have an 'evt' property.  For example 
  you can use ${evt.alarmLevel} to get the integer value of the alarm level.  For example to Print <i>Urgent</i> one could use the following ftl code:
  
  <p>
  <code>
  &lt;#if evt.alarmLevel==0&gt;
  	&lt;@fmt key="common.alarmLevel.urgent"/&gt;
  &lt; /#if&gt;
  </code>
  </p>
  Another example of adding data point tags:
  <p>
  <code>
    &lt;#list point.tags as tag,value&gt;
      ${tag} - ${value}
    &lt;/#list&gt;
  </code>
  </p>
<p>
  Describing how to use all of the data within the model is not within the scope of this document, for examples please see the existing templates in the ftl folder.
</p>
</div>